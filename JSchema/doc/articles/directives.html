<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Validation Directives | JSchema </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Validation Directives | JSchema ">
      
      
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/relogiclabs/JSchema-DotNet/blob/develop/JSchema/doc/articles/directives.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/logo.svg" alt="JSchema">
            JSchema
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<style>
pre code { font-size: 1.1em; }
</style>
<h1 id="validation-directives">Validation Directives</h1>
<p>Directives serve as special instructions or commands for the JSchema parsers, interpreters, and validators. They are used to control various aspects of the validation process or to provide metadata for documentation. Additionally, they offer crucial information about schema and JSON, as well as essential customization of the validation procedure to meet specific requirements.</p>
<h2 id="title-directive">Title Directive</h2>
<p>Within a schema, the title directive is used to provide a name, label, or a brief intent of the schema for which it is written. Besides, the title directive is optional and additional description can be supplied as multiple comments inside the schema document to provide more detail.</p>
<p>However, this directive is only used for documentation purposes and does not have any impact in the validation process. To represent the title directive, the following example of notation can be used:</p>
<pre><code class="lang-stylus">%title: &quot;Example name or brief description&quot;
</code></pre>
<h2 id="version-directive">Version Directive</h2>
<p>In a schema, the version directive is used to provide a version label of the schema document which helps to keep track of updates. Although optional, the version directive is useful for documentation purposes and does not affect the validation process. The version directive can be represented using the following notation example:</p>
<pre><code class="lang-stylus">%version: &quot;2.0.0-beta1&quot;
</code></pre>
<h2 id="import-directive">Import Directive</h2>
<p>Import directive enables the addition or inclusion of a class, as defined by object-oriented programming, to a schema along with a set of methods that have specific signatures for performing custom validations. This feature extends the built-in validation capabilities of the schema. In the C# language, it is also necessary to specify the assembly name together with the class name. The example below illustrates how to utilize the import directive in C# language:</p>
<pre><code class="lang-stylus">%import: RelogicLabs.JSchema.Tests.External.ExternalFunctions,
                                    RelogicLabs.JSchema.Tests
</code></pre>
<h2 id="pragma-directive">Pragma Directive</h2>
<p>Pragma directives provide a mechanism to modify the default settings for certain predefined parameters of the validation process. This allows you to adjust the behaviours of schema validation process as per your requirements.</p>
<h3 id="ignore-undefined-properties">Ignore Undefined Properties</h3>
<p>The <code>IgnoreUndefinedProperties</code> pragma directive serves the purpose of instructing the validation process on how to handle JSON properties that are not explicitly defined in the schema, not even by the undefined marker or symbol. You can use this directive to specify whether such properties should be ignored during validation or if validation errors should be raised for any undefined properties in the JSON document.</p>
<p>The default value of this directive is <code>false</code>, which means that by default, undefined properties in the JSON document are not ignored, and validation errors will be raised for them. For example, the following usage of this directive instructs the validation process to ignore any undefined properties in the JSON document:</p>
<pre><code class="lang-stylus">%pragma IgnoreUndefinedProperties: true
</code></pre>
<h3 id="date-data-type-format">Date Data Type Format</h3>
<p>The <code>DateDataTypeFormat</code> pragma directive enables you to customize the default format of the <code>#date</code> data type. By default, the <code>#date</code> data type follows the ISO 8601 standard, precisely using the format <code>YYYY-MM-DD</code>. Additional details on date-time patterns and formats are available <a href="/JSchema-DotNet/articles/datetime.html">here</a>. The subsequent example illustrates the process of defining a customized date format for the <code>#date</code> data type:</p>
<pre><code class="lang-stylus">%pragma DateDataTypeFormat: &quot;DD-MM-YYYY&quot;
</code></pre>
<h3 id="time-data-type-format">Time Data Type Format</h3>
<p>To customize the default format of the <code>#time</code> data type, utilize the <code>TimeDataTypeFormat</code> pragma directive. By default, the <code>#time</code> data type follows the ISO 8601 standard, precisely in the format <code>YYYY-MM-DD'T'hh:mm:ss.FZZ</code>. Further information on date-time patterns and formats can be found <a href="/JSchema-DotNet/articles/datetime.html">here</a>. The following example demonstrates how to specify a customized time format for the <code>#time</code> data type:</p>
<pre><code class="lang-stylus">%pragma TimeDataTypeFormat: &quot;DD-MM-YYYY hh:mm:ss&quot;
</code></pre>
<h3 id="floating-point-tolerance">Floating Point Tolerance</h3>
<p>The <code>FloatingPointTolerance</code> pragma directive allows you to define the tolerance level for relative errors in floating-point numbers during calculations and computations carried out by the validation process. By default, this directive is set to <code>1E-10</code>, indicating a small tolerance. However, you have the flexibility to adjust this value to any desired number. To specify a custom tolerance value of <code>1E-07</code>, you can use the following notation as an example:</p>
<pre><code class="lang-stylus">%pragma FloatingPointTolerance: 1E-07
</code></pre>
<h3 id="ignore-object-property-order">Ignore Object Property Order</h3>
<p>The <code>IgnoreObjectPropertyOrder</code> pragma directive provides a means to enforce a specific order or sequence of JSON object properties, following the schema definition. This requirement for strict ordering is only needed in certain special cases. By default, this directive is set to <code>true</code>, meaning that the object property order outlined in the schema document is not mandatory. However, you can override this default by setting it to <code>false</code>, as shown in the following example below:</p>
<pre><code class="lang-stylus">%pragma IgnoreObjectPropertyOrder: false
</code></pre>
<h2 id="definition--define-directive">Definition / Define Directive</h2>
<p>This feature in JSchema allows you to define a name for a schema component or fragment, which can be referenced from various parts of your schema. This means that if you encounter similar validation requirements in different sections of your schema, you can conveniently refer to the named schema component instead of duplicating the same validation rules. For more information about the schema component syntax and format, please refer to the documentation <a href="/JSchema-DotNet/articles/components.html">here</a>. Here is a simple example of how to use this directive:</p>
<pre><code class="lang-stylus">%define $product: {
    &quot;id&quot;: @length(2, 10) @regex(&quot;[a-z][a-z0-9]+&quot;) #string,
    &quot;name&quot;: @length(5, 100) #string,
    &quot;price&quot;: @range(0.1, 1000000),
    &quot;inStock&quot;: #boolean
}
</code></pre>
<h2 id="schema-directive">Schema Directive</h2>
<p>The schema directive serves as the starting or entry point for both the schema document and the schema validation process. It becomes mandatory when other directives are present within the document. In such cases, the schema directive explicitly designates the beginning of the schema document and defines the entry point for validation process.</p>
<p>However, if there are no other directives used in the document, the entire document itself is automatically considered as the schema document, with the document's beginning serving as its entry point. To illustrate, here is a simple example of a schema document with schema directive:</p>
<pre><code class="lang-stylus">%schema:
{
    &quot;user&quot;: {
        &quot;id&quot;: @range(1, 10000) #integer,
        /*username does not allow special characters*/
        &quot;username&quot;: @regex(&quot;[a-z_]{3,30}&quot;) #string,
        /*currently only one role is allowed by system*/
        &quot;role&quot;: &quot;user&quot; #string,
        &quot;isActive&quot;: #boolean, //user account current status
        &quot;registeredAt&quot;: #time
    }
}
</code></pre>
<h2 id="script-directive">Script Directive</h2>
<p>The script directive enables the inclusion of CScript code into a JSchema document, providing the flexibility to define custom validation functions directly within the schema document. These validation functions can accept any number of nodes across the JSON tree as parameters, enabling comprehensive processing and validation to ensure the data integrity of the entire JSON tree. For more information about CScript syntax and format, please refer to the documentation <a href="/JSchema-DotNet/articles/cscript.html">here</a>. The following is a simple example of how to use this directive:</p>
<pre><code class="lang-stylus">%script: {
    constraint function checkAccess(role) {
        if(role[0] == &quot;user&quot; &amp;&amp; target &gt; 5) return fail(
            &quot;ERRACCESS01&quot;, &quot;Data access incompatible with 'user' role&quot;,
            expected(&quot;an access at most 5 for 'user' role&quot;),
            actual(&quot;found access &quot; + target + &quot; which is greater than 5&quot;));
    }
}
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/relogiclabs/JSchema-DotNet/blob/develop/JSchema/doc/articles/directives.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div style="display:flex;justify-content:space-between"><span style="text-align:left"><a href="https://www.relogiclabs.com"><img src="/JSchema-DotNet/images/relogiclabs.svg" alt="Relogic Labs"></a></span><span style="text-align:right">&copy; Relogic Labs. All rights reserved.</span></div>
        </div>
      </div>
    </footer>
  </body>
</html>
